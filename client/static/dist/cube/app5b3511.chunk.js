(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{116:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=f(n(343)),r=f(n(114)),a=f(n(173)),o=f(n(351)),i=f(n(352)),c=f(n(353)),s=f(n(54)),l=f(n(20)),d=f(n(24));function f(t){return t&&t.__esModule?t:{default:t}}var v=new c.default,p=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.default)(this,t),e.id&&(this.setCacheTree(e.id,e.struct),s.default.commit("cube/updateTree",e))}return(0,i.default)(t,[{key:"getTreeId",value:function(){return s.default.state.cube.tree.id}},{key:"getCacheId",value:function(t){return"tree"+t}},{key:"getStruct",value:function(){return l.default.extend({},s.default.state.cube.tree.struct)}},{key:"getUsedComponents",value:function(){var t=this.getStruct(),e=new c.default;return function t(n){n.tag&&e.add(n.tag),n.slots&&n.slots.forEach(function(e){t(e)})}(t),[].concat((0,a.default)(e))}},{key:"setCacheTree",value:function(t,e){var n=this.getCacheId(t);window.localStorage.setItem(n,(0,r.default)({id:t,struct:e||this.getStruct()})),s.default.commit("cube/updateTreeSaved",!0)}},{key:"getCacheTree",value:function(t){var e=this.getCacheId(t);return JSON.parse(window.localStorage.getItem(e)||"{}")}},{key:"getRootUid",value:function(){return this.getStruct().uuid}},{key:"getRandomUid",value:function(){var t=[];return function e(n){t.push(n.uuid),n.slots&&n.slots.forEach(function(t){e(t)})}(this.getStruct()),t[Math.floor(Math.random()*t.length)]}},{key:"getNodeByUid",value:function(t){var e=null;return function n(u){u.uuid===t?e=u:!e&&u.slots&&u.slots.forEach(function(t){n(t)})}(this.getStruct()),e}},{key:"selectNodeByUid",value:function(t){var e=this.getStruct(),n=null;return function e(u){u.uuid===t?(n=u,u.selected=!0):u.selected=!1,u.slots&&u.slots.forEach(function(t){e(t)})}(e),s.default.commit("cube/updateTreeStruct",e),n}},{key:"getSeletedNode",value:function(){var t=!1;return function e(n){n.selected?t=n:!t&&n.slots&&n.slots.forEach(function(t){e(t)})}(this.getStruct()),t}},{key:"addNode",value:function(t,e){var n=this.getStruct(),u=!1;!function n(r){u||r.uuid!==t||(u=!0,r.slots=r.slots||[],r.slots.push(e)),!u&&r.slots&&r.slots.forEach(function(t){n(t)})}(n),s.default.commit("cube/updateTreeStruct",n),this.selectNodeByUid(e.uuid)}},{key:"insertNodeBefore",value:function(t,e){var n=this.getStruct(),u=null;!function n(r){r.slots&&r.slots.forEach(function(a,o){u||(a.uuid===t?(u=a,r.slots.splice(o,0,e)):n(a))})}(n),s.default.commit("cube/updateTreeStruct",n),this.selectNodeByUid(e.uuid)}},{key:"deleteNodeByUid",value:function(t){var e=this.getStruct(),n=!1,u=!1;return function e(r){if(r.uuid===t&&r.root)throw new Error("根节点不允许删除");!u&&r.slots&&r.slots.forEach(function(a,o){a.uuid===t?(u=a,n=a.selected,r.slots.splice(o,1)):e(a)})}(e),s.default.commit("cube/updateTreeStruct",e),!n&&this.getSeletedNode()||this.selectNodeByUid(this.getRootUid()),u}},{key:"travelUpdateNodeByUid",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},u=this.getStruct();!function u(r){r.uuid===t?e(r):n(r),r.slots&&r.slots.forEach(function(t){u(t)})}(u),s.default.commit("cube/updateTreeStruct",u)}},{key:"matchUpdateNodeByUid",value:function(t,e){var n=this.getStruct(),u=!1;!function n(r){u||r.uuid!==t||(u=!0,e(r)),!u&&r.slots&&r.slots.forEach(function(t){n(t)})}(n),s.default.commit("cube/updateTreeStruct",n)}},{key:"renderTree",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cube-preview",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cube-preview-inner";if(!document.getElementById(e))throw new Error("外部容器不存在");var a=this.getUsedComponents().map(function(t){if(!v.has(t))return v.add(t),n(368)("./"+t+".vue").then(function(e){console.info(t),d.default.component(t,d.default.extend(e.default))})});u.default.all(a).then(function(){var n=t.getStruct(),u=d.default.component("root-component",{render:function(t){return function t(e,n){var u=e.tag,r=e.properties||{},a=e.slots||[];return e.selected&&(e.properties.class=e.properties.class||{},e.properties.class["cube-selected"]=!0),n(u,r,a.map(function(e){return t(e,n)}))}(n,t)}});document.getElementById(r)||(document.getElementById(e).outerHTML='<div id="'+e+'"><div id="'+r+'"></div></div>'),(new u).$mount("#"+r)})}}]),t}();e.default=p},120:function(t,e,n){"use strict";var u=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"blank"},[e("router-view")],1)},r=[];u._withStripped=!0,n.d(e,"a",function(){return u}),n.d(e,"b",function(){return r})},121:function(t,e,n){"use strict";var u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"whole-container"},[n("el-row",[n("el-col",{staticStyle:{float:"right","text-align":"right"},attrs:{span:6}},[n("el-button",{attrs:{type:t.isTreeSaved?"success":"danger",loading:t.saveLoading},on:{click:t.saveCacheTree}},[t._v("\n        "+t._s(t.isTreeSaved?"已保存":"点击保存")+"\n      ")])],1)],1),t._v(" "),n("el-row",[n("el-col",{attrs:{span:3}},[n("h4",{staticClass:"col-title"},[t._v("组件列表")]),t._v(" "),n("div",{staticClass:"grid-content cube-list-grid"},[n("CubeList")],1)]),t._v(" "),n("el-col",{attrs:{span:5}},[n("h4",{staticClass:"col-title"},[t._v("组件操作")]),t._v(" "),n("div",{staticClass:"grid-content cube-tree-grid"},[n("CubeStruct",{attrs:{menu:t.struct}})],1)]),t._v(" "),n("el-col",{attrs:{span:9}},[n("h4",{staticClass:"col-title"},[t._v("预览展示")]),t._v(" "),n("div",{staticClass:"grid-content cube-preview-grid"},[n("CubePreview")],1)]),t._v(" "),n("el-col",{attrs:{span:7}},[n("h4",{staticClass:"col-title"},[t._v("属性编辑")]),t._v(" "),n("div",{staticClass:"grid-content cube-prop-grid"},[n("CubeProp")],1)])],1)],1)},r=[];u._withStripped=!0,n.d(e,"a",function(){return u}),n.d(e,"b",function(){return r})},122:function(t,e,n){"use strict";var u=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"preview-page"},[e("div",{attrs:{id:"cube-preview"}},[e("CubePreview")],1)])},r=[];u._withStripped=!0,n.d(e,"a",function(){return u}),n.d(e,"b",function(){return r})},123:function(t,e,n){"use strict";var u=function(){var t=this.$createElement;this._self._c;return this._m(0)},r=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"error-wrap"},[e("img",{staticClass:"error-404",attrs:{src:"/static/img/common/error-404.png"}})])}];u._withStripped=!0,n.d(e,"a",function(){return u}),n.d(e,"b",function(){return r})},124:function(t,e,n){"use strict";var u=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"cube-prop"}},[e("PropItemVue",{attrs:{attrs:this.bindProps}})],1)},r=[];u._withStripped=!0,n.d(e,"a",function(){return u}),n.d(e,"b",function(){return r})},125:function(t,e,n){"use strict";var u=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"grid-content cube-tree-preview",attrs:{id:"cube-preview"}})},r=[];u._withStripped=!0,n.d(e,"a",function(){return u}),n.d(e,"b",function(){return r})},126:function(t,e,n){"use strict";var u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cube-struct",attrs:{"data-uuid":t.menu.uuid,draggable:"true"}},[n("div",{staticClass:"menu-item-group"},[t.menu.root?t._e():n("div",{staticClass:"cube-seat before",attrs:{"data-uuid":t.menu.uuid,"data-put-before":!0}}),t._v(" "),n("div",{class:{"menu-item":!0,normal:!t.menu.root,root:t.menu.root,selected:t.menu.selected},attrs:{"data-tag":t.menu.tag},on:{click:function(e){t.setSelectedNode(t.menu)}}},[t._v("\n\n      "+t._s(t.menu.label)+"\n\n      "),t._v(" "),t.menu.root?t._e():n("i",{staticClass:"el-icon-close menu-item__del",on:{click:function(e){e.stopPropagation(),t.deleteNode(t.menu)}}})])]),t._v(" "),!0===t.getPackageSlots(t.menu.tag)?n("ul",{staticClass:"slot-container"},[n("li",{staticClass:"slot-item"},[t._l(t.menu.slots,function(e){return"default"!==e.properties.slot&&e.properties.slot?t._e():[n("MenuVue",{key:e.uuid,attrs:{menu:e}})]}),t._v(" "),n("div",{staticClass:"cube-seat slot",attrs:{"data-uuid":t.menu.uuid,title:"匿名卡槽","data-slot-name":"default","data-slot-title":"匿名卡槽"}})],2)]):t._e(),t._v(" "),t.getPackageSlots(t.menu.tag)&&t.getPackageSlots(t.menu.tag).length>0?n("ul",{staticClass:"slot-container"},t._l(t.getPackageSlots(t.menu.tag),function(e,u){return n("li",{key:u,staticClass:"slot-item"},[t._l(t.menu.slots,function(u){return u.properties.slot===e.sname?[n("MenuVue",{key:u.uuid,attrs:{menu:u}})]:t._e()}),t._v(" "),n("div",{staticClass:"cube-seat slot",attrs:{"data-uuid":t.menu.uuid,title:e.slabel,"data-slot-name":e.sname,"data-slot-title":e.slabel}})],2)})):t._e()])},r=[];u._withStripped=!0,n.d(e,"a",function(){return u}),n.d(e,"b",function(){return r})},127:function(t,e,n){"use strict";var u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"cube-list"}},[n("ul",t._l(t.packages,function(e){return e.config.visible?n("li",{key:e.tag,staticClass:"block-component-item",attrs:{draggable:"true","data-block-tag":e.tag,"data-block-label":e.label}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus"}},[t._v("\n        "+t._s(e.label)+"\n      ")])],1):t._e()}))])},r=[];u._withStripped=!0,n.d(e,"a",function(){return u}),n.d(e,"b",function(){return r})},128:function(t,e,n){"use strict";var u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("ul",t._l(t.attrs,function(e,u){return n("li",{key:u},[t.isObject(t.attrs[u])?n("span",[[n("div",{staticStyle:{"margin-left":"12px"}},[n("p",{staticStyle:{margin:"5px 0 0"}},[t._v(t._s(u)+"包含的属性")]),t._v(" "),n("PropItemVue",{attrs:{attrs:t.attrs[u]}})],1)]],2):n("span",[t._v("\n        "+t._s(u)+": "),n("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.attrs[u],callback:function(e){t.$set(t.attrs,u,e)},expression:"attrs[key]"}})],1)])}))])},r=[];u._withStripped=!0,n.d(e,"a",function(){return u}),n.d(e,"b",function(){return r})},132:function(t,e,n){"use strict";n.r(e);var u=n(120),r=n(56);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);var o=n(4),i=Object(o.a)(r.default,u.a,u.b,!1,null,null,null);i.options.__file="src/app/cube/scope/layouts/blank.vue",e.default=i.exports},180:function(t,e,n){"use strict";n.r(e);var u=n(125),r=n(69);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);n(335),n(337);var o=n(4),i=Object(o.a)(r.default,u.a,u.b,!1,null,"1f6fb9ae",null);i.options.__file="src/app/cube/dashboard/cube-preview.vue",e.default=i.exports},187:function(t,e,n){"use strict";var u=s(n(83)),r=s(n(24)),a=s(n(194)),o=s(n(132)),i=s(n(195)),c=s(n(54));function s(t){return t&&t.__esModule?t:{default:t}}n(377),n(379),n(398),n(400),r.default.config.devtools=!1,r.default.config.silent=!0,r.default.config.errorHandler=function(t,e){console.warn(t,e)};var l=[];(0,u.default)(a.default).forEach(function(t){l.push({tag:t,label:a.default[t].label,config:a.default[t].config})}),c.default.commit("cube/addPackages",l);var d=new r.default({el:"#root",router:i.default,store:c.default,data:{bus:new r.default},render:function(t){return t(o.default)}});r.default.use(d)},194:function(t,e,n){"use strict";t.exports={"block-root":{label:"根组件",config:{visible:!1,slots:!0}},"block-a":{label:"组件a",config:{visible:!0,slots:[{sname:"header",slabel:"头部卡槽"}]}},"block-b":{label:"组件b",config:{visible:!0,slots:!1}},"block-c":{label:"组件c",config:{visible:!0,slots:!1}},"block-d":{label:"组件d",config:{visible:!0,slots:!1}},"block-e":{label:"组件e",config:{visible:!0,slots:!1}}}},195:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=l(n(27)),r=l(n(24)),a=l(n(200)),o=l(n(132)),i=l(n(201)),c=l(n(20)),s=l(n(54));function l(t){return t&&t.__esModule?t:{default:t}}r.default.use(a.default);var d=new a.default({mode:"hash",base:"/",linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",routes:[{path:"",redirect:"dashboard",component:o.default,children:[n(318),n(373)]},{path:"*",component:i.default}]});d.beforeEach(function(t,e,n){var r=c.default.getRouterMeta(t.matched);s.default.commit("cube/updateRouteMeta",(0,u.default)({},r)),n()}),d.afterEach(function(t){}),e.default=d},20:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=i(n(204)),r=i(n(83)),a=i(n(221)),o=i(n(306));function i(t){return t&&t.__esModule?t:{default:t}}var c={isDeepEqual:i(n(309)).default,isNumber:function(t){return"number"==typeof t&&isFinite(t)},isUndefined:function(t){return void 0===t},isArray:function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},isObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)},isFunction:function(t){return"function"==typeof t},isString:function(t){return"[object String]"===Object.prototype.toString.call(t)},md5:function(t){return a.default.createHash("md5").update(t+"","utf8").digest("hex")},getPageID:function(){return window.location.pathname.split("?")[0].replace(/^\//,"").split("/").join("-")},getRouterMeta:function(t){var e={};return Array.prototype.slice.call(t).forEach(function(t){t.meta&&(e=c.extend(e,t.meta))}),e},queryURL:function(t,e){var n={};return(t=t.replace(/^[^?=]*\?/gi,"").split("#")[0]).replace(/(^|&)([^&=]+)=([^&]*)/g,function(t,e,u,r){try{u=decodeURIComponent(u)}catch(t){}try{r=decodeURIComponent(r)}catch(t){}u in n?n[u]instanceof Array?n[u].push(r):n[u]=[n[u],r]:n[u]=/\[\]$/.test(u)?[r]:r}),e?n[e]:n},encodeURIJson:function(t){var e=[];for(var n in t)if(null!==t[n])if(t[n]instanceof Array)for(var u=0;u<t[n].length;u++)e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n][u]));else e.push(n+"="+encodeURIComponent(t[n]));return e.join("&")},extend:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n=arguments.length<=1?0:arguments.length-1,u=void 0,r=void 0,a=void 0,o=void 0;for(t||(t=c.isArray(arguments.length<=1?void 0:arguments[1])?[]:{});e<n;e++)if(u=arguments.length<=e+1?void 0:arguments[e+1])for(r in u)a=t[r],o=u[r],a&&a===o||(c.isArray(o)?t[r]=c.extend([],o):c.isObject(o)?t[r]=c.extend(a&&c.isObject(a)?a:{},o):t[r]=o);return t},getDestructResult:function(t,e){var n={},u={};return t=(t=Array.isArray(t)?t:[t]).map(function(t){return t.indexOf(":")>-1&&(u[t.split(":")[0]]=t.split(":")[1]),t.split(":")[0]}),(0,r.default)(e).forEach(function(r){t.indexOf(r)>-1&&(n[u[r]||r]=e[r])}),n},getQueryJoin:function(t){return o.default.stringify(t)},getTrimedResult:function(t){var e=this;return"string"==typeof t?t.trim():"[object Object]"===Object.prototype.toString.call(t)?((0,r.default)(t).forEach(function(n){t[n]=e.getTrimedResult(t[n])}),t):"[object Array]"===Object.prototype.toString.call(t)?t.map(function(t){return e.getTrimedResult(t)}):t},renameKeys:function(t,e,n){if(!e||"object"!==(void 0===e?"undefined":(0,u.default)(e)))return t;if(Array.isArray(t)){for(var r=[],a=0;a<t.length;a++)r.push(c.renameKeys(t[a],e));return r}if("object"!==(void 0===t?"undefined":(0,u.default)(t)))return t;var o={},i=c.extend({},t);for(var s in e)if("object"===(0,u.default)(e[s])&&i.hasOwnProperty(s))i[s]=c.renameKeys(i[s],e[s]),o[s]=c.renameKeys(i[s],e[s]);else if(i.hasOwnProperty(s)&&s!==e[s]){var l=i[s];i[e[s]]=l,o[e[s]]=l,delete i[s]}return n?o:i},dateTimeFormat:function(t,e){var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var u in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+u+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?n[u]:("00"+n[u]).substr((""+n[u]).length)));return e},get uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},interop:function(t){return t&&t.__esModule?t.default:t}};e.default=c},201:function(t,e,n){"use strict";n.r(e);var u=n(123),r=n(58);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);n(202);var o=n(4),i=Object(o.a)(r.default,u.a,u.b,!1,null,"52b166e4",null);i.options.__file="src/app/cube/scope/layouts/404.vue",e.default=i.exports},202:function(t,e,n){"use strict";var u=n(60);n.n(u).a},224:function(t,e){},226:function(t,e){},259:function(t,e){},260:function(t,e){},312:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=function(t){return t&&t.__esModule?t:{default:t}}(n(313));e.default={cube:u.default}},313:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=o(n(173)),r=o(n(27)),a=o(n(20));function o(t){return t&&t.__esModule?t:{default:t}}e.default={namespaced:!0,state:{packages:[],routeMeta:{},isTreeSaved:!1,tree:{id:null,struct:{tag:"block-root",uuid:a.default.uuid,label:"页面容器",root:!0,selected:!0,properties:{props:{r:"根节点的属性",rr:{rrr:"根节点嵌套属性"}}},slots:[]}}},getters:{tree:function(t){return(0,r.default)({},t.tree)},struct:function(t){return(0,r.default)({},t.tree.struct)},packages:function(t){return[].concat((0,u.default)(t.packages))},routeMeta:function(t){return(0,r.default)({},t.routeMeta)},structChange:function(t){return function(){return(0,r.default)({},t.tree.struct)}}},mutations:{updateRouteMeta:function(t,e){t.routeMeta=(0,r.default)({},e)},addPackages:function(t,e){t.packages=[].concat((0,u.default)(e))},updateTree:function(t,e){t.tree=(0,r.default)({},e)},updateTreeSaved:function(t,e){t.isTreeSaved=e},updateTreeStruct:function(t,e){t.tree.struct=(0,r.default)({},e)}},actions:{}}},318:function(t,e,n){"use strict";var u=function(t){return t&&t.__esModule?t:{default:t}}(n(319));t.exports={path:"dashboard",meta:{},component:u.default}},319:function(t,e,n){"use strict";n.r(e);var u=n(121),r=n(61);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);n(371);var o=n(4),i=Object(o.a)(r.default,u.a,u.b,!1,null,"50ab0246",null);i.options.__file="src/app/cube/dashboard/home.vue",e.default=i.exports},320:function(t,e,n){"use strict";n.r(e);var u=n(127),r=n(63);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);n(322);var o=n(4),i=Object(o.a)(r.default,u.a,u.b,!1,null,"02c6e0b0",null);i.options.__file="src/app/cube/dashboard/cube-list.vue",e.default=i.exports},322:function(t,e,n){"use strict";var u=n(65);n.n(u).a},324:function(t,e,n){"use strict";n.r(e);var u=n(126),r=n(66);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);n(333);var o=n(4),i=Object(o.a)(r.default,u.a,u.b,!1,null,"04383a42",null);i.options.__file="src/app/cube/dashboard/cube-struct.vue",e.default=i.exports},333:function(t,e,n){"use strict";var u=n(68);n.n(u).a},335:function(t,e,n){"use strict";var u=n(71);n.n(u).a},337:function(t,e,n){"use strict";var u=n(72);n.n(u).a},339:function(t,e,n){"use strict";n.r(e);var u=n(124),r=n(73);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);n(369);var o=n(4),i=Object(o.a)(r.default,u.a,u.b,!1,null,"732d97ed",null);i.options.__file="src/app/cube/dashboard/cube-prop.vue",e.default=i.exports},340:function(t,e,n){"use strict";n.r(e);var u=n(128),r=n(75);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);n(341);var o=n(4),i=Object(o.a)(r.default,u.a,u.b,!1,null,"90bbd1ba",null);i.options.__file="src/app/cube/dashboard/cube-prop-item.vue",e.default=i.exports},341:function(t,e,n){"use strict";var u=n(77);n.n(u).a},368:function(t,e,n){var u={"./block-a.vue":[402,1],"./block-b.vue":[403,2],"./block-c.vue":[404,3],"./block-d.vue":[405,4],"./block-e.vue":[406,5],"./block-root.vue":[407,6]};function r(t){var e=u[t];return e?n.e(e[1]).then(function(){var t=e[0];return n(t)}):Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}r.keys=function(){return Object.keys(u)},r.id=368,t.exports=r},369:function(t,e,n){"use strict";var u=n(78);n.n(u).a},371:function(t,e,n){"use strict";var u=n(79);n.n(u).a},373:function(t,e,n){"use strict";var u=function(t){return t&&t.__esModule?t:{default:t}}(n(374));t.exports={path:"preview",meta:{},component:u.default}},374:function(t,e,n){"use strict";n.r(e);var u=n(122),r=n(80);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);n(375);var o=n(4),i=Object(o.a)(r.default,u.a,u.b,!1,null,"7428d22e",null);i.options.__file="src/app/cube/preview/home.vue",e.default=i.exports},375:function(t,e,n){"use strict";var u=n(82);n.n(u).a},377:function(t,e,n){"use strict";var u=o(n(83)),r=o(n(24)),a=o(n(378));function o(t){return t&&t.__esModule?t:{default:t}}(0,u.default)(a.default).forEach(function(t){r.default.filter(t,a.default[t])})},378:function(t,e,n){"use strict";t.exports={_addSuffix:function(t,e){return t+e}}},379:function(t,e,n){"use strict";c(n(380));var u=c(n(382)),r=(c(n(383)),c(n(385))),a=(c(n(390)),c(n(392))),o=(c(n(393)),c(n(395)));n(396);var i=c(n(24));function c(t){return t&&t.__esModule?t:{default:t}}i.default.prototype.$ELEMENT={size:"small",zIndex:3e3},i.default.use(o.default),i.default.use(a.default),i.default.use(r.default),i.default.use(u.default)},398:function(t,e,n){"use strict";var u=i(n(24)),r=i(n(20)),a=i(n(399)),o=i(n(116));function i(t){return t&&t.__esModule?t:{default:t}}var c={data:function(){return{treeInst:new o.default}},computed:{}};u.default.mixin(r.default.extend({},c,a.default))},399:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=function(t){return t&&t.__esModule?t:{default:t}}(n(27));e.default={methods:{},computed:{currentRouteData:function(){var t=this.$router.history.current,e=(0,u.default)({},t);return e.matched=e.matched.map(function(t){return{name:t.name,path:t.path,regex:t.regex}}),e}}}},400:function(t,e,n){},54:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=o(n(24)),r=o(n(55)),a=o(n(312));function o(t){return t&&t.__esModule?t:{default:t}}u.default.use(r.default);e.default=new r.default.Store({state:{},mutations:{},actions:{},getters:{},modules:a.default,plugins:[],strict:!1})},56:function(t,e,n){"use strict";n.r(e);var u=n(57),r=n.n(u);for(var a in u)"default"!==a&&function(t){n.d(e,t,function(){return u[t]})}(a);e.default=r.a},57:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{}}}},58:function(t,e,n){"use strict";n.r(e);var u=n(59),r=n.n(u);for(var a in u)"default"!==a&&function(t){n.d(e,t,function(){return u[t]})}(a);e.default=r.a},59:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{}}}},60:function(t,e,n){},61:function(t,e,n){"use strict";n.r(e);var u=n(62),r=n.n(u);for(var a in u)"default"!==a&&function(t){n.d(e,t,function(){return u[t]})}(a);e.default=r.a},62:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=d(n(27)),r=d(n(20)),a=d(n(54)),o=n(55),i=d(n(320)),c=d(n(324)),s=d(n(180)),l=d(n(339));function d(t){return t&&t.__esModule?t:{default:t}}e.default={components:{CubeList:i.default,CubeStruct:c.default,CubePreview:s.default,CubeProp:l.default},data:function(){return{treeId:null,saveLoading:!1}},methods:{boradcastStructChange:function(){console.debug("structChange..."),this.$root.bus.$emit("structChange")},saveCacheTree:function(){var t=this;this.saveLoading=!0,setTimeout(function(){t.treeInst.setCacheTree(t.treeId),t.boradcastStructChange(),t.saveLoading=!1},300)}},computed:(0,u.default)({},(0,o.mapGetters)("cube",["tree","struct"]),(0,o.mapState)("cube",["isTreeSaved"])),mounted:function(){var t=this;this.treeId=this.currentRouteData.query.id;var e=this.treeInst.getCacheTree(this.treeId);e.id||((e=r.default.extend({},this.tree)).id=this.treeId,this.treeInst.setCacheTree(this.treeId)),a.default.commit("cube/updateTree",e),this.$store.watch(this.$store.getters["cube/structChange"],function(n,u){r.default.isDeepEqual(n,u)||t.boradcastStructChange(),a.default.commit("cube/updateTreeSaved",r.default.isDeepEqual(e,t.tree))}),this.boradcastStructChange()}}},63:function(t,e,n){"use strict";n.r(e);var u=n(64),r=n.n(u);for(var a in u)"default"!==a&&function(t){n.d(e,t,function(){return u[t]})}(a);e.default=r.a},64:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=o(n(27)),r=o(n(114)),a=n(55);function o(t){return t&&t.__esModule?t:{default:t}}e.default={props:{},components:{},data:function(){return{}},methods:{bindDragEvent:function(){document.querySelectorAll(".block-component-item").forEach(function(t,e){t.ondragstart=null,t.ondrag=null,t.ondragend=null}),document.querySelectorAll(".block-component-item").forEach(function(t,e){t.ondragstart=function(t){var e={uuid:null,tag:t.target.getAttribute("data-block-tag"),label:t.target.getAttribute("data-block-label")};window.localStorage.setItem("drag-info",(0,r.default)(e))},t.ondrag=function(t){},t.ondragend=function(t){}})}},computed:(0,u.default)({},(0,a.mapGetters)("cube",["packages"])),mounted:function(){this.bindDragEvent()}}},65:function(t,e,n){},66:function(t,e,n){"use strict";n.r(e);var u=n(67),r=n.n(u);for(var a in u)"default"!==a&&function(t){n.d(e,t,function(){return u[t]})}(a);e.default=r.a},67:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=s(n(27)),r=s(n(325)),a=s(n(114)),o=s(n(20)),i=n(55),c=s(n(328));function s(t){return t&&t.__esModule?t:{default:t}}e.default={name:"MenuVue",props:{menu:{type:Object,default:function(){return{}}}},components:{},data:function(){return{}},methods:{setSelectedNode:function(t){this.treeInst.selectNodeByUid(t.uuid)},deleteNode:function(t){this.treeInst.deleteNodeByUid(t.uuid)},getPackageSlots:function(t){var e=this.packages.filter(function(e){return e.tag===t})[0]||{};return e.config.slots||(e.config.slots=!1),e.config.slots},removeAllDragOver:function(){c.default.findAll(".cube-seat").forEach(function(t){c.default.removeClass(t,"drag-over")})},closest:function(t,e){var n=void 0;["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(t){return"function"==typeof document.body[t]&&(n=t,!0)});for(var u=void 0;t;){if((u=t.parentElement)&&u[n](e))return u;t=u}return null},bindDragEvent:function(){document.querySelectorAll(".cube-struct").forEach(function(t,e){t.ondragstart=null,t.ondrag=null,t.ondragend=null}),document.querySelectorAll(".cube-struct").forEach(function(t,e){t.ondragstart=function(t){var e={uuid:t.target.getAttribute("data-uuid")};window.localStorage.setItem("drag-info",(0,a.default)(e))},t.ondrag=function(t){},t.ondragend=function(t){}})},bindDropEvent:function(){document.querySelectorAll(".cube-seat").forEach(function(t,e){t.ondragenter=null,t.ondragover=null,t.ondragleave=null,t.ondrop=null});var t=this;document.querySelectorAll(".cube-seat").forEach(function(e,n){e.ondragenter=function(t){t.preventDefault()},e.ondragover=function(n){n.preventDefault(),n.stopPropagation(),t.removeAllDragOver();var u=n.toElement||n.relatedTarget,r=JSON.parse(window.localStorage.getItem("drag-info")).uuid;r&&document.querySelectorAll('.cube-struct[data-uuid="'+r+'"]')[0].contains(u)||c.default.addClass(e,"drag-over")},e.ondragleave=function(n){n.preventDefault(),n.stopPropagation();var u=n.fromElement||n.relatedTarget,r=n.toElement||n.relatedTarget;t.closest(u,".cube-seat")?this.contains(r)&&r.getAttribute("class").indexOf("cube-seat")>-1&&(t.removeAllDragOver(),c.default.addClass(e,"drag-over")):t.removeAllDragOver()},e.ondrop=function(e){e.stopPropagation(),e.preventDefault();var n=document.querySelectorAll(".drag-over")[0];if(t.removeAllDragOver(),n){var u=JSON.parse(window.localStorage.getItem("drag-info")),a=n.getAttribute("data-put-before"),i=n.getAttribute("data-uuid"),c=n.getAttribute("data-slot-name"),s=null;if(a&&(c=(t.treeInst.getNodeByUid(i).properties||{}).slot||"default"),u.uuid)i!==u.uuid&&(s=t.treeInst.deleteNodeByUid(u.uuid),c&&(s.properties=s.properties||{},s.properties.slot=c));else{var l=o.default.uuid;s={tag:u.tag,uuid:l,label:u.label,selected:!0,properties:{props:(0,r.default)({},u.tag.split("-")[1],"新建节点"+u.label),attrs:{id:l},slot:c},ref:l}}t.treeInst[a?"insertNodeBefore":"addNode"](i,s),setTimeout(function(){t.bindDragDropEvent()},50)}else console.warn("没有获取到目标位置")}})},bindDragDropEvent:function(){this.bindDragEvent(),this.bindDropEvent()}},computed:(0,u.default)({},(0,i.mapGetters)("cube",["packages"])),mounted:function(){this.bindDragDropEvent()}}},68:function(t,e,n){},69:function(t,e,n){"use strict";n.r(e);var u=n(70),r=n.n(u);for(var a in u)"default"!==a&&function(t){n.d(e,t,function(){return u[t]})}(a);e.default=r.a},70:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{}},methods:{},computed:{},watch:{},mounted:function(){var t=this;this.$root.$data.bus.$on("structChange",function(){t.treeInst.renderTree()})}}},71:function(t,e,n){},72:function(t,e,n){},73:function(t,e,n){"use strict";n.r(e);var u=n(74),r=n.n(u);for(var a in u)"default"!==a&&function(t){n.d(e,t,function(){return u[t]})}(a);e.default=r.a},74:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=a(n(20)),r=a(n(340));function a(t){return t&&t.__esModule?t:{default:t}}var o=new(a(n(116)).default);e.default={data:function(){return{bindProps:o.getSeletedNode().properties.props}},components:{PropItemVue:r.default},methods:{},computed:{selectedNode:function(){return this.treeInst.getSeletedNode()},selectedProps:function(){return u.default.extend({},this.selectedNode.properties.props)},selectedUid:function(){return this.selectedNode.uuid}},watch:{selectedNode:{deep:!0,handler:function(t,e){t.uuid!==e.uuid&&(this.bindProps=this.selectedProps)}},bindProps:{deep:!0,handler:function(t,e){this.treeInst.matchUpdateNodeByUid(this.selectedUid,function(e){e.properties.props=u.default.extend({},t)})}}},mounted:function(){}}},75:function(t,e,n){"use strict";n.r(e);var u=n(76),r=n.n(u);for(var a in u)"default"!==a&&function(t){n.d(e,t,function(){return u[t]})}(a);e.default=r.a},76:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=function(t){return t&&t.__esModule?t:{default:t}}(n(20));e.default={name:"PropItemVue",props:{attrs:Object},methods:{isObject:function(t){return u.default.isObject(t)}},mounted:function(){}}},77:function(t,e,n){},78:function(t,e,n){},79:function(t,e,n){},80:function(t,e,n){"use strict";n.r(e);var u=n(81),r=n.n(u);for(var a in u)"default"!==a&&function(t){n.d(e,t,function(){return u[t]})}(a);e.default=r.a},81:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=a(n(180)),r=a(n(116));function a(t){return t&&t.__esModule?t:{default:t}}e.default={components:{CubePreview:u.default},data:function(){return{}},mounted:function(){var t=this.currentRouteData.query.id,e=this.treeInst.getCacheTree(t);new r.default(e).renderTree()}}},82:function(t,e,n){}},[[187,8,7]]]);